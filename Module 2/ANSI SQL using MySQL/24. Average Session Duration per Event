<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Average Session Duration per Event</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; width: 60%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background: #00796b; color: white; }
</style>
</head>
<body>

<h2>Average Session Duration per Event (in minutes)</h2>
<table>
  <thead>
    <tr>
      <th>Event</th>
      <th>Average Session Duration (mins)</th>
    </tr>
  </thead>
  <tbody id="avg-duration-body"></tbody>
</table>

<script>
const events = [
  { id: 1, name: "Tech Conference" },
  { id: 2, name: "Startup Meetup" },
  { id: 3, name: "Food Festival" }
];

// Sessions with start and end times as ISO strings
const sessions = [
  { id: 1, eventId: 1, start: "2025-05-27T09:00:00", end: "2025-05-27T10:30:00" },
  { id: 2, eventId: 1, start: "2025-05-27T11:00:00", end: "2025-05-27T12:00:00" },
  { id: 3, eventId: 2, start: "2025-05-28T14:00:00", end: "2025-05-28T15:15:00" },
  { id: 4, eventId: 2, start: "2025-05-28T15:30:00", end: "2025-05-28T16:00:00" }
  // Note: eventId 3 has no sessions
];

const tbody = document.getElementById('avg-duration-body');

events.forEach(event => {
  // Filter sessions for this event
  const eventSessions = sessions.filter(s => s.eventId === event.id);
  
  if(eventSessions.length === 0){
    // No sessions
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${event.name}</td><td>No sessions</td>`;
    tbody.appendChild(tr);
    return;
  }
  
  // Calculate durations in minutes
  const durations = eventSessions.map(s => {
    const start = new Date(s.start);
    const end = new Date(s.end);
    return (end - start) / 60000; // ms to minutes
  });
  
  // Average duration
  const avg = (durations.reduce((a,b) => a + b, 0) / durations.length).toFixed(2);
  
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${event.name}</td><td>${avg}</td>`;
  tbody.appendChild(tr);
});
</script>

</body>
</html>
