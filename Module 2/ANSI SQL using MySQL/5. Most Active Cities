<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Most Active Cities</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fafc; padding: 20px; }
    .city-card { background: #fff; margin: 8px 0; padding: 12px; border-left: 5px solid #2196F3; }
  </style>
</head>
<body>

  <h2>Top 5 Most Active Cities</h2>
  <div id="active-cities"></div>

  <script>
    // Sample user registrations (userId, city)
    const registrations = [
      { userId: 1, city: "New York" },
      { userId: 2, city: "Los Angeles" },
      { userId: 3, city: "New York" },
      { userId: 4, city: "Chicago" },
      { userId: 5, city: "Los Angeles" },
      { userId: 6, city: "Houston" },
      { userId: 7, city: "Chicago" },
      { userId: 8, city: "Houston" },
      { userId: 9, city: "Phoenix" },
      { userId: 10, city: "New York" },
      { userId: 11, city: "Houston" },
      { userId: 12, city: "San Diego" },
      { userId: 13, city: "San Diego" },
      { userId: 14, city: "Chicago" },
      { userId: 15, city: "Phoenix" }
    ];

    // Count distinct users per city
    const cityUserMap = {};

    registrations.forEach(({ userId, city }) => {
      if (!cityUserMap[city]) {
        cityUserMap[city] = new Set();
      }
      cityUserMap[city].add(userId);
    });

    // Convert to array with counts
    const cityCounts = Object.entries(cityUserMap).map(([city, userSet]) => ({
      city,
      distinctUsers: userSet.size
    }));

    // Sort descending and pick top 5
    cityCounts.sort((a, b) => b.distinctUsers - a.distinctUsers);
    const top5Cities = cityCounts.slice(0, 5);

    const container = document.getElementById("active-cities");
    top5Cities.forEach(({ city, distinctUsers }) => {
      const div = document.createElement("div");
      div.className = "city-card";
      div.textContent = `${city}: ${distinctUsers} distinct user registrations`;
      container.appendChild(div);
    });
  </script>

</body>
</html>
